<!DOCTYPE html>
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>
        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
        <div id="johannesburg-bar" class="plotly-graph-div" style="height:600px; width:100%;"></div>
        <script type="text/javascript">
            const data = [
                {
                    name: "Ineligible/declined participation/data currently unavailable",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [16, 14, 11, 11, 11],
                    type: "bar",
                    marker: {color: "#7f7f7f"},
                    hovertemplate: "Stage: Ineligible/declined participation/data currently unavailable<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "1st or 2nd invites",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [4, 3, 2, 1, 1],
                    type: "bar",
                    marker: {color: "#ff7f0e"},
                    hovertemplate: "Stage: 1st or 2nd invites<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "3rd or more invites",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [2, 1, 1, 1, 1],
                    type: "bar",
                    marker: {color: "#2ca02c"},
                    hovertemplate: "Stage: 3rd or more invites<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "Data sharing discussions and eligibility check",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [2, 2, 3, 3, 3],
                    type: "bar",
                    marker: {color: "#d62728"},
                    hovertemplate: "Stage: Data sharing discussions and eligibility check<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "DTA in progress",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [4, 4, 5, 5, 5],
                    type: "bar",
                    marker: {color: "#9467bd"},
                    hovertemplate: "Stage: DTA in progress<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "DTA completed",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [4, 4, 4, 4, 4],
                    type: "bar",
                    marker: {color: "#8c564b"},
                    hovertemplate: "Stage: DTA completed<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "Data sets in hand",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [4, 4, 4, 4, 3],
                    type: "bar",
                    marker: {color: "#bcbd22"},
                    hovertemplate: "Stage: Data sets in hand<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "Database harmonization",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [10, 12, 13, 14, 15],
                    type: "bar",
                    marker: {color: "#17becf"},
                    hovertemplate: "Stage: Database harmonization<br>Month: %{x}<br>Studies: %{y}"
                },
                {
                    name: "Database ready for analysis",
                    x: ["Sep 2024", "Oct 2024", "Nov 2024", "Dec 2024", "Jan 2025"],
                    y: [3, 3, 3, 3, 3],
                    type: "bar",
                    marker: {color: "#e377c2"},
                    hovertemplate: "Stage: Database ready for analysis<br>Month: %{x}<br>Studies: %{y}"
                }
            ];

            const layout = {
                title: {
                    text: "Johannesburg Progress Over Time",
                    font: { size: 20 },
                    x: 0.5,
                    y: 0.95,
                    xanchor: "center",
                    yanchor: "top"
                },
                xaxis: {
                    title: { text: "Month" }
                },
                yaxis: {
                    title: { text: "Number of Studies" }
                },
                barmode: "stack",
                showlegend: true,
                legend: {
                    traceorder: "normal",
                    orientation: "h",
                    yanchor: "bottom",
                    y: -0.5,
                    xanchor: "center",
                    x: 0.5
                },
                margin: {
                    t: 100,
                    b: 150
                },
                height: 600,
                annotations: [
                    {
                        x: "Sep 2024",
                        y: 49,
                        text: "N=49",
                        showarrow: false,
                        yshift: 10
                    },
                    {
                        x: "Oct 2024",
                        y: 47,
                        text: "N=47",
                        showarrow: false,
                        yshift: 10
                    },
                    {
                        x: "Nov 2024",
                        y: 46,
                        text: "N=46",
                        showarrow: false,
                        yshift: 10
                    },
                    {
                        x: "Dec 2024",
                        y: 46,
                        text: "N=46",
                        showarrow: false,
                        yshift: 10
                    },
                    {
                        x: "Jan 2025",
                        y: 46,
                        text: "N=46",
                        showarrow: false,
                        yshift: 10
                    }
                ]
            };

            const config = {
                displayModeBar: false,
                responsive: true
            };

            Plotly.newPlot("johannesburg-bar", data, layout, config);
        </script>
    </div>
</body>
</html>
