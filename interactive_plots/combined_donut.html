<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        #donut-chart {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <div id="donut-chart"></div>
    <script>
        const data = [{
            values: [3, 25, 51, 47, 15, 28, 14, 9, 94],
            labels: [
                "1st or 2nd invites",
                "3rd or more invites",
                "Data sharing discussions and eligibility check",
                "DTA in progress",
                "DTA completed",
                "Data sets in hand",
                "Database harmonization",
                "Database ready for analysis",
                "Ineligible/declined participation/data currently unavailable"
            ],
            marker: {
                colors: [
                    "#ff7f0e",
                    "#2ca02c",
                    "#d62728",
                    "#9467bd",
                    "#8c564b",
                    "#bcbd22",  // Datasets in hand
                    "#17becf",  // Harmonization
                    "#e377c2",  // Analysis ready
                    "#7f7f7f"
                ]
            },
            type: 'pie',
            hole: 0.5,
            direction: 'clockwise',
            sort: false,
            textinfo: 'value+percent',
            textposition: 'inside',
            hovertemplate: 'Stage: %{label}<br>Studies: %{value}<extra></extra>'
        }];

        const layout = {
            showlegend: true,
            legend: {
                orientation: 'h',
                yanchor: 'bottom',
                y: -0.5,
                xanchor: 'center',
                x: 0.5,
                traceorder: 'normal'
            },
            margin: {
                t: 0,
                b: 100,
                l: 0,
                r: 0
            }
        };

        const config = {
            displayModeBar: false,
            responsive: true
        };

        Plotly.newPlot('donut-chart', data, layout, config);
    </script>
</body>
</html>
