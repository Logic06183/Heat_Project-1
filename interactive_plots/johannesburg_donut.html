<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
</head>
<body>
    <div id="donut-chart"></div>
    <script>
        const data = [{
            values: [11.0, 1.0, 1.0, 3.0, 5.0, 4.0, 4.0, 14.0, 3.0],
            labels: [
                "Ineligible/declined participation/data currently unavailable",
                "1st or 2nd invites",
                "3rd or more invites",
                "Data sharing discussions and eligibility check",
                "DTA in progress",
                "DTA completed",
                "Data sets in hand",
                "Database harmonization",
                "Database ready for analysis"
            ],
            marker: {
                colors: [
                    "#7f7f7f",
                    "#ff7f0e",
                    "#2ca02c",
                    "#d62728",
                    "#9467bd",
                    "#8c564b",
                    "#bcbd22",
                    "#17becf",
                    "#e377c2"
                ]
            },
            type: 'pie',
            hole: 0.5,
            direction: 'clockwise',
            sort: false,
            textinfo: 'value+percent',
            textposition: 'inside',
            hovertemplate: 'Stage: %{label}<br>Studies: %{value}'
        }];

        const layout = {
            title: {
                text: 'Johannesburg Distribution - Dec 2024',
                font: { size: 20 },
                x: 0.5,
                y: 0.95,
                xanchor: 'center',
                yanchor: 'top'
            },
            showlegend: true,
            legend: {
                orientation: 'h',
                yanchor: 'bottom',
                y: -0.5,
                xanchor: 'center',
                x: 0.5,
                traceorder: 'normal'
            },
            margin: {
                t: 100,
                b: 150
            },
            height: 600,
            annotations: [{
                text: 'Total Studies: 46',
                showarrow: false,
                font: { size: 16 },
                x: 0.5,
                y: 0.5
            }]
        };

        const config = {
            displayModeBar: false,
            responsive: true
        };

        Plotly.newPlot('donut-chart', data, layout, config);
    </script>
</body>
</html>
